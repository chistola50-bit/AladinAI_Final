{% extends "base.html" %}
{% block title %}–ß–∞—Ç ‚Äî CookNet AI{% endblock %}
{% block content %}

<div class="container">
  <h2>üí¨ –û–±—â–∏–π –∫—É–ª–∏–Ω–∞—Ä–Ω—ã–π —á–∞—Ç</h2>
  <p class="text-muted">–û–±—Å—É–∂–¥–∞–π—Ç–µ —Ä–µ—Ü–µ–ø—Ç—ã, –¥–µ–ª–∏—Ç–µ—Å—å —Å–æ–≤–µ—Ç–∞–º–∏ –∏ –∏–¥–µ—è–º–∏! üç≥</p>

  <div class="chat-box">
    {% for m in msgs %}
      <div class="msg {% if loop.index is even %}right{% else %}left{% endif %}">
        <div class="bubble">
          <strong>@{{ m.username }}</strong><br>
          <span>{{ m.text }}</span><br>
          <small>{{ m.created_at[:16].replace('T',' ') }}</small>
        </div>
      </div>
    {% else %}
      <p style="text-align:center;color:#777;">–ü–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç. –ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤—ã–º! ü•∞</p>
    {% endfor %}
  </div>

  <hr>

  <h3>‚úçÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
  <form method="post" action="/chat">
    <input type="text" name="username" placeholder="–í–∞—à –Ω–∏–∫" required
           style="width:100%;padding:8px;margin-bottom:8px;border-radius:6px;border:1px solid #ccc;">
    <textarea name="text" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." required
              style="width:100%;padding:8px;height:80px;margin-bottom:8px;border-radius:6px;border:1px solid #ccc;"></textarea>
    <label>–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2+3? (–ø—Ä–æ–≤–µ—Ä–∫–∞)</label>
    <input type="text" name="captcha" required
           style="width:100px;padding:5px;margin:5px;border-radius:6px;border:1px solid #aaa;">
    <br>
    <button type="submit" class="like-btn">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>
</div>

<style>
.chat-box {
  background: #fff;
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-bottom: 25px;
  max-height: 500px;
  overflow-y: auto;
}

.msg {
  display: flex;
  margin-bottom: 12px;
}
.msg.left { justify-content: flex-start; }
.msg.right { justify-content: flex-end; }

.bubble {
  background: #ffecb3;
  border-radius: 12px;
  padding: 10px 14px;
  max-width: 75%;
  word-wrap: break-word;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}
.msg.right .bubble {
  background: #ffe0b2;
}
.bubble strong {
  color: #e64a19;
}
.bubble small {
  color: #666;
  font-size: 12px;
}

@media (prefers-color-scheme: dark) {
  .chat-box { background: #2a2a2a; }
  .bubble { background: #3b3b3b; color: #eee; }
  .msg.right .bubble { background: #444; }
  .bubble strong { color: #ffa270; }
}
</style>

{% endblock %}
