{% extends "base.html" %}
{% block title %}{{ r.title }} | CookNet AI{% endblock %}
{% block content %}

<div class="recipe-card">
  <h2>{{ r.title }}</h2>
  <p><strong>–ê–≤—Ç–æ—Ä:</strong> <a href="/u/{{ r.username }}">@{{ r.username }}</a></p>

  {% if r.photo_url %}
    <img src="{{ r.photo_url }}" alt="{{ r.title }}">
  {% endif %}

  {% if r.video_url %}
    <video controls style="width:100%; border-radius:10px; margin-top:10px;">
      <source src="{{ r.video_url }}" type="video/mp4">
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
    </video>
  {% endif %}

  <p style="margin-top:10px;">{{ r.description }}</p>
  <p><em>{{ r.ai_caption }}</em></p>

  <form method="post" action="/like/{{ r.id }}">
    <button class="like-btn" type="submit">‚ù§Ô∏è {{ r.likes }}</button>
  </form>
</div>

<h3>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>

{% if r.comments %}
  {% for c in r.comments %}
    <div class="recipe-card" style="background:#fff8e1;">
      <p><strong>@{{ c.username }}</strong> ‚Äî {{ c.text }}</p>
      <small>{{ c.created_at }}</small>
    </div>
  {% endfor %}
{% else %}
  <p>–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!</p>
{% endif %}

<form method="post" action="/comment/{{ r.id }}" style="margin-top:20px;">
  <input type="text" name="username" placeholder="–í–∞—à–µ –∏–º—è" required style="padding:6px; border-radius:6px; border:1px solid #ccc; width:30%;">
  <br><br>
  <textarea name="text" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." required style="width:100%; height:80px; border-radius:8px; padding:8px;"></textarea>
  <br><br>
  <label>–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2+3? (–∫–∞–ø—á–∞)</label>
  <input type="text" name="captcha" required style="padding:6px; width:60px; margin-left:10px;">
  <br><br>
  <button type="submit" class="like-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å üí¨</button>
</form>

{% endblock %}
